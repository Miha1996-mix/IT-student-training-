<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#116530">
  <title>HalalTopish — Смачно та халяль — знайди своє по всій Україні</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --bg: #f7fbf7;
      --card: #ffffff;
      --accent: #116530;
      --accent-light: #18a558;
      --muted: #6b7280;
      --muted-light: #9ca3af;
      --glass: rgba(17,101,48,0.08);
      --glass-dark: rgba(17,101,48,0.15);
      --radius: 14px;
      --shadow: 0 6px 20px rgba(16,24,40,0.08);
      --transition: all 0.3s ease;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    
    * {
      box-sizing: border-box;
    }
    
    body {
      margin: 0;
      background: linear-gradient(180deg, var(--bg), #eef7ee);
      color: #0b1220;
      min-height: 100vh;
      padding-bottom: 80px; /* Для мобільного меню */
    }
    
    /* Header Styles */
    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 18px 20px;
      max-width: 1200px;
      margin: 0 auto;
      position: sticky;
      top: 0;
      background: var(--bg);
      z-index: 100;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }
    
    .brand {
      display: flex;
      gap: 12px;
      align-items: center;
    }
    
    .logo {
      width: 48px;
      height: 48px;
      border-radius: 10px;
      background: var(--accent);
      display: grid;
      place-items: center;
      color: #fff;
      font-weight: 700;
      font-size: 18px;
    }
    
    /* Navigation */
    .nav-toggle {
      display: none;
      background: none;
      border: none;
      font-size: 24px;
      color: var(--accent);
      cursor: pointer;
    }
    
    nav {
      display: flex;
      gap: 20px;
    }
    
    nav a {
      text-decoration: none;
      color: var(--muted);
      font-weight: 500;
      font-size: 15px;
      transition: var(--transition);
    }
    
    nav a:hover, nav a.active {
      color: var(--accent);
    }
    
    /* Hero Section */
    .hero {
      max-width: 1200px;
      margin: 20px auto 30px;
      padding: 0 20px;
    }
    
    .hero-content {
      text-align: center;
      margin-bottom: 30px;
    }
    
    .hero-title {
      font-size: 2.2rem;
      margin-bottom: 12px;
      color: var(--accent);
    }
    
    .hero-subtitle {
      font-size: 1.1rem;
      color: var(--muted);
      max-width: 600px;
      margin: 0 auto;
    }
    
    .search-container {
      background: var(--card);
      padding: 20px;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      margin-bottom: 20px;
    }
    
    .searchbar {
      display: flex;
      gap: 12px;
      align-items: center;
      margin-bottom: 15px;
    }
    
    .searchbar input, .searchbar select {
      flex: 1;
      border: 1px solid #e5e7eb;
      padding: 14px 16px;
      border-radius: 10px;
      font-size: 16px;
      outline: none;
      transition: var(--transition);
    }
    
    .searchbar input:focus, .searchbar select:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 3px var(--glass);
    }
    
    .searchbtn {
      background: var(--accent);
      color: #fff;
      padding: 14px 20px;
      border-radius: 10px;
      border: 0;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      white-space: nowrap;
    }
    
    .searchbtn:hover {
      background: var(--accent-light);
    }
    
    .filters {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
      font-size: 14px;
      color: var(--muted);
    }
    
    .filter-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    
    .tag {
      display: inline-block;
      padding: 8px 14px;
      border-radius: 999px;
      font-size: 14px;
      background: var(--glass);
      color: var(--accent);
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      border: none;
    }
    
    .tag.active {
      background: var(--accent);
      color: #fff;
    }
    
    .tag:hover {
      background: var(--glass-dark);
    }
    
    /* Advanced Filters */
    .advanced-filters {
      margin-top: 15px;
      padding-top: 15px;
      border-top: 1px solid #e5e7eb;
      display: none;
    }
    
    .advanced-filters.show {
      display: block;
    }
    
    .filter-toggle {
      background: none;
      border: none;
      color: var(--accent);
      font-size: 14px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 5px;
      margin-top: 10px;
    }
    
    .filter-options {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      margin-top: 10px;
    }
    
    .filter-group {
      flex: 1;
      min-width: 200px;
    }
    
    .filter-group label {
      display: block;
      margin-bottom: 5px;
      font-size: 14px;
      color: var(--muted);
    }
    
    .filter-group select, .filter-group input {
      width: 100%;
      padding: 10px;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      font-size: 14px;
    }
    
    /* Main Content */
    main {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }
    
    .results-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    
    .sort-select {
      padding: 8px 12px;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      font-size: 14px;
      background: var(--card);
    }
    
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    
    .card {
      background: var(--card);
      border-radius: 12px;
      overflow: hidden;
      box-shadow: var(--shadow);
      transition: var(--transition);
      cursor: pointer;
    }
    
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 25px rgba(11,18,32,0.1);
    }
    
    .thumb {
      width: 100%;
      height: 180px;
      background-size: cover;
      background-position: center;
      position: relative;
    }
    
    .card-badge {
      position: absolute;
      top: 12px;
      right: 12px;
      background: var(--accent);
      color: white;
      padding: 5px 10px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
    }
    
    .card-content {
      padding: 16px;
    }
    
    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 10px;
    }
    
    .title {
      font-weight: 800;
      margin: 0;
      font-size: 18px;
    }
    
    .verified-badge {
      background: rgba(6,95,60,0.12);
      color: #065f3c;
      padding: 4px 8px;
      border-radius: 8px;
      font-size: 12px;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }
    
    .descr {
      margin: 0 0 12px;
      color: var(--muted);
      font-size: 14px;
      line-height: 1.5;
    }
    
    .card-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: var(--muted);
      font-size: 13px;
    }
    
    .rating {
      display: flex;
      align-items: center;
      gap: 4px;
      color: #f59e0b;
      font-weight: 600;
    }
    
    /* Map View */
    .map-container {
      display: none;
      height: 500px;
      margin-top: 20px;
      border-radius: var(--radius);
      overflow: hidden;
      box-shadow: var(--shadow);
    }
    
    .map-container.show {
      display: block;
    }
    
    /* View Toggle */
    .view-toggle {
      display: flex;
      gap: 10px;
      margin-left: 15px;
    }
    
    .view-btn {
      background: var(--card);
      border: 1px solid #e5e7eb;
      padding: 8px 12px;
      border-radius: 8px;
      cursor: pointer;
      transition: var(--transition);
    }
    
    .view-btn.active {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
    }
    
    /* Pagination */
    .pagination {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-top: 40px;
    }
    
    .pagination button {
      padding: 8px 14px;
      border: 1px solid #e5e7eb;
      background: var(--card);
      border-radius: 8px;
      cursor: pointer;
      transition: var(--transition);
    }
    
    .pagination button.active {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
    }
    
    .pagination button:hover:not(.active) {
      background: #f3f4f6;
    }
    
    /* Mobile Menu */
    .mobile-menu {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--card);
      display: none;
      justify-content: space-around;
      padding: 12px;
      box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
      z-index: 100;
    }
    
    .menu-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-decoration: none;
      color: var(--muted);
      font-size: 12px;
      gap: 4px;
    }
    
    .menu-item.active {
      color: var(--accent);
    }
    
    .menu-item i {
      font-size: 20px;
    }
    
    /* Footer */
    footer {
      max-width: 1200px;
      margin: 60px auto 30px;
      text-align: center;
      color: var(--muted);
      font-size: 14px;
      padding: 30px 20px;
      border-top: 1px solid #e5e7eb;
    }
    
    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.5);
      z-index: 1000;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    
    .modal.show {
      display: flex;
    }
    
    .modal-content {
      background: var(--card);
      border-radius: var(--radius);
      max-width: 600px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      padding: 24px;
      position: relative;
    }
    
    .modal-close {
      position: absolute;
      top: 20px;
      right: 20px;
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: var(--muted);
    }
    
    /* Loading */
    .loading {
      display: none;
      text-align: center;
      padding: 30px;
      color: var(--muted);
    }
    
    .loading.show {
      display: block;
  }
  
  /* Animation */
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  .card {
    animation: fadeIn 0.5s ease forwards;
  }
  
  /* Responsive Styles */
  @media (max-width: 768px) {
    header {
      padding: 12px 15px;
    }
    
    .nav-toggle {
      display: block;
    }
    
    nav {
      display: none;
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: var(--card);
      flex-direction: column;
      padding: 15px;
      box-shadow: 0 5px 10px rgba(0,0,0,0.1);
    }
    
    nav.show {
      display: flex;
    }
    
    .hero-title {
      font-size: 1.8rem;
    }
    
    .searchbar {
      flex-direction: column;
    }
    
    .filter-options {
      flex-direction: column;
      gap: 10px;
    }
    
    .filter-group {
      min-width: 100%;
    }
    
    .grid {
      grid-template-columns: 1fr;
    }
    
    .results-header {
      flex-direction: column;
      align-items: flex-start;
      gap: 15px;
    }
    
    .view-toggle {
      margin-left: 0;
    }
    
    .mobile-menu {
      display: flex;
    }
    
    body {
      padding-bottom: 70px;
    }
  }
  
  @media (min-width: 769px) and (max-width: 1024px) {
    .grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }
  </style>
</head>
<body>
  <header>
        <div class="brand">
      <div class="logo">HT</div>
      <div>
        <div style="font-weight:800">HalalTopish — لذيذ و حلال</div>
        <div style="font-size:13px;color:var(--muted)">Знайди халяль поруч — чесно і зрозуміло</div>
      </div>
    </div>
    
    <button class="nav-toggle" id="navToggle">
      <i class="fas fa-bars"></i>
    </button>
    
    <nav id="mainNav">
      <a href="#" class="active"><i class="fas fa-search"></i> Пошук</a>
      <a href="#"><i class="fas fa-map-marker-alt"></i> На мапі</a>
      <a href="#"><i class="fas fa-certificate"></i> Сертифікати</a>
      <a href="#"><i class="fas fa-info-circle"></i> Про нас</a>
    </nav>
  </header>

  <section class="hero">
    <div class="hero-content">
      <h1 class="hero-title">Знайди халяль за своїм смаком</h1>
      <p class="hero-subtitle">Від ресторанів та магазинів до послуг — все в одному місці з підтвердженими сертифікатами</p>
    </div>
    
    <div class="search-container">
      <div class="searchbar">
        <input id="q" placeholder="Пошук" />
        <select id="city">
          <option value="">Вся Україна</option>
          <option value="Kyiv">Київ</option>
          <option value="Lviv">Львів</option>
          <option value="Odesa">Одеса</option>
          <option value="Kharkiv">Харків</option>
          <option value="Dnipro">Дніпро</option>
          <option value="Zaporizhzhia">Запоріжжя</option>
          <option value="Ivano-Frankivsk">Івано-Франківськ</option>
          <option value="Ternopil">Тернопіль</option>
          <option value="Uzhgorod">Ужгород</option>
          <option value="Chernivtsi">Чернівці</option>
          <option value="Vinnytsia">Вінниця</option>
          <option value="Khmelnytskyi">Хмельницький</option>
          <option value="Lutsk">Луцьк</option>
          <option value="Rivne">Рівне</option>
          <option value="Zhytomyr">Житомир</option>
          <option value="Cherkasy">Черкаси</option>
          <option value="Chernihiv">Чернігів</option>
          <option value="Sumy">Суми</option>
          <option value="Poltava">Полтава</option>
          <option value="Kropyvnytskyi">Кропивницький</option>
          <option value="Mykolaiv">Миколаїв</option>
          <option value="Kherson">Херсон</option>
          <option value="Simferopol">Сімферополь</option>
        </select>
        <button class="searchbtn" id="search">
          <i class="fas fa-search"></i> Знайти
        </button>
      </div>
      
      <div class="filters">
        <div style="font-size:14px;color:var(--muted)">Категорії:</div>
        <div class="filter-tags">
          <button class="tag" data-cat="all">Усі</button>
          <button class="tag" data-cat="restaurant">Ресторани</button>
          <button class="tag" data-cat="cafe">Кафе</button>
          <button class="tag" data-cat="market">Магазини</button>
          <button class="tag" data-cat="butcher">М'ясні</button>
          <button class="tag" data-cat="services">Послуги</button>
        </div>
      </div>
      
      <button class="filter-toggle" id="filterToggle">
        <i class="fas fa-sliders-h"></i> Розширені фільтри
      </button>
      
      <div class="advanced-filters" id="advancedFilters">
        <div class="filter-options">
          <div class="filter-group">
            <label for="cuisine">Кухня</label>
            <select id="cuisine">
              <option value="">Всі кухні</option>
              <option value="turkish">Турецька</option>
              <option value="arabic">Арабська</option>
              <option value="asian">Азійська</option>
              <option value="european">Європейська</option>
              <option value="uzbek">Узбецька</option>
            </select>
          </div>
          
          <div class="filter-group">
            <label for="price">Ціновий діапазон</label>
            <select id="price">
              <option value="">Від</option>
              <option value="low">1000$</option>
              <option value="medium">1500$</option>
              <option value="high">2000$</option>
            </select>
          </div>
          
          <div class="filter-group">
            <label for="rating">Мінімальний рейтинг</label>
            <select id="rating">
              <option value="">Будь-який</option>
              <option value="4">4+ зірок</option>
              <option value="3">3+ зірок</option>
            </select>
          </div>
        </div>
      </div>
    </div>
  </section>

  <main>
    <div class="results-header">
      <div id="resultsInfo" style="color:var(--muted);font-size:14px">Показано 25 результатів</div>
      <div style="display: flex; align-items: center;">
        <select class="sort-select" id="sortSelect">
          <option value="default">За замовчуванням</option>
          <option value="rating">За рейтингом</option>
          <option value="name">За назвою</option>
          <option value="city">За містом</option>
        </select>
        
        <div class="view-toggle">
          <button class="view-btn active" id="listView">
            <i class="fas fa-list"></i>
          </button>
          <button class="view-btn" id="mapView">
            <i class="fas fa-map"></i>
          </button>
        </div>
      </div>
    </div>
    
    <div class="map-container" id="mapContainer">
      <!-- Map will be rendered here -->
      <div style="width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:#eef7ee;color:var(--muted)">
        <div style="text-align:center">
          <i class="fas fa-map-marked-alt" style="font-size:48px;margin-bottom:15px"></i>
          <p>Карта доступна при включенні геолокації</p>
        </div>
      </div>
    </div>
    
    <div class="grid" id="grid"></div>
    
    <div class="pagination" id="pagination"></div>
    
    <div class="loading" id="loading">
      <i class="fas fa-spinner fa-spin" style="font-size:24px;margin-bottom:10px"></i>
      <p>Завантаження...</p>
    </div>
  </main>

  <div class="mobile-menu">
    <a href="#" class="menu-item active">
      <i class="fas fa-search"></i>
      <span>Пошук</span>
    </a>
    <a href="#" class="menu-item">
      <i class="fas fa-map-marker-alt"></i>
      <span>Мапа</span>
    </a>
    <a href="#" class="menu-item">
      <i class="fas fa-heart"></i>
      <span>Збережені</span>
    </a>
    <a href="#" class="menu-item">
      <i class="fas fa-user"></i>
      <span>Профіль</span>
    </a>
  </div>

  <div class="modal" id="placeModal">
    <div class="modal-content">
      <button class="modal-close" id="modalClose">
        <i class="fas fa-times"></i>
      </button>
      <div id="modalContent"></div>
    </div>
  </div>

  <footer>
    <p>© 2025 HalalTopish — لذيذ و حلال — простий каталог халяль. Дані оновлюються щодня.</p>
    <p>Для офіційної інформації перевіряйте сертифікати. Додайте своє заклад через нашу форму.</p>
  </footer>

  <script>
    // Розширені тестові дані
    const places = [
      {id:1,name:"Safa Кебаб",cat:"restaurant",city:"Lviv",desc:"Справжні турецькі кебаби, плов, без свинини. Сертифіковано місцевим імамом. Швидке обслуговування та затишна атмосфера.",img:"https://images.pexels.com/photos/13927509/pexels-photo-13927509.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940", verified:true, rating:4.7, cuisine:"turkish", price:"low", address:"вул. Галицька, 15", phone:"+380 67 123 4567", hours:"10:00-22:00"},
      {id:2,name:"Noor Market",cat:"market",city:"Kyiv",desc:"Халяль м'ясо, спеції, заморожені продукти. Великий вибір імпортних товарів з арабських країн.",img:"https://images.unsplash.com/photo-1512621776951-a57141f2eefd?q=80&w=800&auto=format&fit=crop", verified:true, rating:4.5, cuisine:"", price:"medium", address:"вул. Хрещатик, 42", phone:"+380 66 987 6543", hours:"09:00-21:00"},
      {id:3,name:"Sultan mangal (Halal)",cat:"services",city:"Lviv Вул Остапа Нижанківського 26,",desc:"Кейтеринг для заходів з халяль меню. Організація весіль, банкетів, корпоративних подій з дотриманням усіх вимог.",img:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?q=80&w=800&auto=format&fit=crop", verified:false, rating:4.3, cuisine:"", price:"high,", phone:"+380 50 111 2233", hours:"08:00-20:00"},
      {id:4,name:"Halal Bazar",cat:"market",city:"Odesa",desc:"Десерти та імпортні продукти з халяль сертифікатами. Найсвіжіші фрукти та овощі, арабські солодощі.",img:"https://images.unsplash.com/photo-1504754524776-8f4f37790ca0?q=80&w=800&auto=format&fit=crop", verified:false, rating:4.0, cuisine:"", price:"low", address:"вул. Дерибасівська, 12", phone:"+380 48 777 8899", hours:"08:30-20:30"},
      {id:5,name:"Al-Riyadh Restaurant",cat:"restaurant",city:"Kyiv",desc:"Традиційна арабська кухня, молитвений куточок. Широкий вибір страв з ягнятини та курки, справжній арабський кава.",img:"https://images.pexels.com/photos/3652513/pexels-photo-3652513.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940", verified:true, rating:4.8, cuisine:"arabic", price:"medium", address:"вул. Велика Васильківська, 56", phone:"+380 44 123 4567", hours:"11:00-23:00"},
      {id:6,name:"Istanbul Doner",cat:"restaurant",city:"Kharkiv",desc:"Справжній турецький дьонер та інші страви османської кухні. Готовить шеф-кухар з Стамбулу.",img:"https://images.unsplash.com/photo-1598214886806-c87b84b7078b?q=80&w=800&auto=format&fit=crop", verified:true, rating:4.6, cuisine:"turkish", price:"low", address:"пр. Перемоги, 34", phone:"+380 57 345 6789", hours:"10:00-23:00"},
      {id:7,name:"Meat & More",cat:"butcher",city:"Dnipro",desc:"Свіже халяль м'ясо від місцевих фермерів. Є послуга різання та фасування за бажанням клієнта.",img:"https://images.pexels.com/photos/21856021/pexels-photo-21856021.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940", verified:true, rating:4.4, cuisine:"", price:"medium", address:"вул. Набережна Перемоги, 67", phone:"+380 56 234 5678", hours:"08:00-19:00"},
      {id:8,name:"Anadolu Cafe",cat:"cafe",city:"Lviv",desc:"Невелика затишна кав'ярня з турецькою кавою та десертами. Ідеальне місце для зустрічей та роботи.",img:"https://images.unsplash.com/photo-1554118811-1e0d58224f24?q=80&w=800&auto=format&fit=crop", verified:false, rating:4.9, cuisine:"turkish", price:"low", address:"вул. Вірменська, 18", phone:"+380 67 888 9977", hours:"08:00-22:00"},
      {id:9,name:"Halal Meat Shop",cat:"butcher",city:"Kyiv",desc:"Спеціалізований магазин з продажу якісного халяль м'яса. Власне виробництво, постійні знижки для постійних клієнтів.",img:"https://images.pexels.com/photos/5175620/pexels-photo-5175620.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940", verified:true, rating:4.2, cuisine:"", price:"medium", address:"вул. Лук'янівська, 24", phone:"+380 44 234 5678", hours:"07:00-18:00"},
      {id:10,name:"Desert Rose",cat:"restaurant",city:"Odesa",desc:"Ресторан з вишуканою арабською кухнею. Жива музика по вихідних, можливість замовити кальян.",img:"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?q=80&w=800&auto=format&fit=crop", verified:true, rating:4.7, cuisine:"arabic", price:"high", address:"вул. Канатна, 32", phone:"+380 48 765 4321", hours:"12:00-24:00"},
      {id:11,name:"Bismillah Food",cat:"market",city:"Ivano-Frankivsk",desc:"Невеликий сімейний магазин з халяль продуктами. Власне виробництво ковбас та напівфабрикатів.",img:"https://images.unsplash.com/photo-1556742111-a301076d9d18?q=80&w=800&auto=format&fit=crop", verified:false, rating:4.1, cuisine:"", price:"low", address:"вул. Грушевського, 15", phone:"+380 34 222 3344", hours:"09:00-18:00"},
      {id:12,name:"Sultan Kebab",cat:"restaurant",city:"Ternopil",desc:"Сімейний ресторан з турецькою кухнею. Спеціалізується на кебабах та грилі. Є дитячий куточок.",img:"https://images.pexels.com/photos/33919747/pexels-photo-33919747.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940", verified:true, rating:4.5, cuisine:"turkish", price:"low", address:"вул. Руська, 8", phone:"+380 35 444 5566", hours:"10:00-22:00"},
      {id:13,name:"Al-Amin Butchery",cat:"butcher",city:"Zaporizhzhia",desc:"М'ясний магазин з широким асортиментом. Можливість попереднього замовлення та доставки.",img:"https://images.pexels.com/photos/4946940/pexels-photo-4946940.jpeg", verified:true, rating:4.3, cuisine:"", price:"medium", address:"пр. Соборний, 143", phone:"+380 61 777 8888", hours:"07:30-17:30"},
      {id:14,name:"Taj Mahal",cat:"restaurant",city:"Uzhgorod",desc:"Ресторан індійської та пакистанської кухні. Багато вегетаріанських страв, професійний персонал.",img:"https://images.unsplash.com/photo-1517244683847-7456b63c5969?q=80&w=800&auto=format&fit=crop", verified:true, rating:4.8, cuisine:"asian", price:"medium", address:"вул. Корятовича, 5", phone:"+380 31 222 3333", hours:"11:00-23:00"},
      {id:15,name:"Halal Delivery",cat:"services",city:"Kyiv",desc:"Служба доставки халяль страв з різних ресторанів міста. Швидка доставка, онлайн-відстеження замовлення.",img:"https://images.unsplash.com/photo-1586511925558-a4c6376fe65f?q=80&w=800&auto=format&fit=crop", verified:true, rating:4.6, cuisine:"", price:"low", address:"вул. Богдана Гаврилишина, 7", phone:"+380 44 500 6000", hours:"Круглосуточно"},
      {id:16,name:"Green Valley",cat:"market",city:"Chernivtsi",desc:"Екологічні продукти з халяль сертифікацією. Органічні овочі, фрукти, молочні продукти.",img:"https://images.unsplash.com/photo-1542838132-92c53300491e?q=80&w=800&auto=format&fit=crop", verified:false, rating:4.0, cuisine:"", price:"medium", address:"вул. Українська, 33", phone:"+380 37 123 7890", hours:"08:00-19:00"},
      {id:17,name:"Kebab House",cat:"restaurant",city:"Vinnytsia",desc:"Невелике заклад з найсмачнішими кебабами в місті. Свіже приготування, великі порції, низькі ціни.",img:"https://images.unsplash.com/photo-1633321702518-7feccafb94d5?q=80&w=800&auto=format&fit=crop", verified:false, rating:4.4, cuisine:"turkish", price:"low", address:"вул. Соборна, 45", phone:"+380 43 555 6666", hours:"11:00-21:00"},
      {id:18,name:"Al-Noor Halal",cat:"butcher",city:"Khmelnytskyi",desc:"М'ясна крамниця з власною забійнею. Найсвіжіше м'ясо, консультації щодо приготування.",img:"https://images.pexels.com/photos/15872909/pexels-photo-15872909.jpeg", verified:true, rating:4.7, cuisine:"", price:"medium", address:"вул. Проскурівська, 89", phone:"+380 38 987 6543", hours:"07:00-16:00"},
      {id:19,name:"Caspian Sea",cat:"restaurant",city:"Lutsk",desc:"Ресторан кавказької та центрально-азійської кухні. Шашлик, плов, манти та інші традиційні страви.",img:"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?q=80&w=800&auto=format&fit=crop", verified:true, rating:4.5, cuisine:"uzbek", price:"medium", address:"вул. Кравчука, 12", phone:"+380 33 444 5555", hours:"12:00-23:00"},
      {id:20,name:"Halal Express",cat:"cafe",city:"Rivne",desc:"Невелике кафе швидкого харчування. Смачні бургери, сендвічі та інші снеки з халяль інгредієнтами.",img:"https://images.unsplash.com/photo-1551782450-a2132b4ba21d?q=80&w=800&auto=format&fit=crop", verified:false, rating:4.2, cuisine:"", price:"low", address:"вул. Соборна, 56", phone:"+380 36 333 4444", hours:"09:00-20:00"},
      {id:21,name:"Spice Bazaar",cat:"market",city:"Zhytomyr",desc:"Магазин спецій та екзотичних продуктів. Великий вибір індійських, арабських та турецьких спецій.",img:"https://images.unsplash.com/photo-1586201375761-83865001e31c?q=80&w=800&auto=format&fit=crop", verified:true, rating:4.6, cuisine:"", price:"medium", address:"пл. Корольова, 3", phone:"+380 41 222 3333", hours:"09:30-18:30"},
      {id:22,name:"Gourmet Halal",cat:"restaurant",city:"Cherkasy",desc:"Ресторан високої кухні з європейськими стравами з халяль інгредієнтами. Ідеально для ділових обідів та романтичних вечерь.",img:"https://images.unsplash.com/photo-1514933651103-005eec06c04b?q=80&w=800&auto=format&fit=crop", verified:true, rating:4.9, cuisine:"european", price:"high", address:"бул. Шевченка, 123", phone:"+380 47 888 9999", hours:"13:00-23:00"},
      {id:23,name:"Halal Meat Center",cat:"butcher",city:"Chernihiv",desc:"Великий м'ясний магазин з повним циклом виробництва. Є власна доставка по місту.",img:"https://images.pexels.com/photos/14836742/pexels-photo-14836742.jpeg", verified:true, rating:4.4, cuisine:"", price:"medium", address:"пр. Миру, 67", phone:"+380 46 777 6666", hours:"07:00-17:00"},
      {id:24,name:"Arabian Nights",cat:"restaurant",city:"Sumy",desc:"Ресторан з автентичною арабською атмосферою. Жива музика, традиційні танці по вихідних.",img:"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?q=80&w=800&auto=format&fit=crop", verified:true, rating:4.7, cuisine:"arabic", price:"high", address:"вул. Петропавлівська, 34", phone:"+380 54 333 2222", hours:"17:00-02:00"},
      {id:25,name:"Quick Halal",cat:"cafe",city:"Poltava",desc:"Кафе швидкого харчування з європейським та східним меню. Є вегетаріанські опції.",img:"https://images.pexels.com/photos/16480438/pexels-photo-16480438.jpeg", verified:false, rating:4.1, cuisine:"", price:"low", address:"вул. Европейська, 45", phone:"+380 53 444 5555", hours:"10:00-21:00"}
    ];
    // DOM Elements
    const grid = document.getElementById('grid');
    const q = document.getElementById('q');
    const city = document.getElementById('city');
    const cuisine = document.getElementById('cuisine');
    const price = document.getElementById('price');
    const ratingFilter = document.getElementById('rating');
    const searchBtn = document.getElementById('search');
    const resultsInfo = document.getElementById('resultsInfo');
    const sortSelect = document.getElementById('sortSelect');
    const filterToggle = document.getElementById('filterToggle');
    const advancedFilters = document.getElementById('advancedFilters');
    const listView = document.getElementById('listView');
    const mapView = document.getElementById('mapView');
    const mapContainer = document.getElementById('mapContainer');
    const pagination = document.getElementById('pagination');
    const loading = document.getElementById('loading');
    const navToggle = document.getElementById('navToggle');
    const mainNav = document.getElementById('mainNav');
    const placeModal = document.getElementById('placeModal');
    const modalClose = document.getElementById('modalClose');
    const modalContent = document.getElementById('modalContent');

    // State
    let currentPage = 1;
    const itemsPerPage = 6;
    let currentView = 'list';
    let currentSort = 'default';
    let filteredPlaces = [...places];

    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
      renderPlaces();
      setupPagination();
      setupEventListeners();
      
      // Set default active category
      document.querySelector('.tag[data-cat="all"]').classList.add('active');
    });

    function setupEventListeners() {
      // Search and filter events
      searchBtn.addEventListener('click', filterPlaces);
      q.addEventListener('keydown', e => { if(e.key === 'Enter') filterPlaces(); });
      city.addEventListener('change', filterPlaces);
      cuisine.addEventListener('change', filterPlaces);
      price.addEventListener('change', filterPlaces);
      ratingFilter.addEventListener('change', filterPlaces);
      sortSelect.addEventListener('change', function() {
        currentSort = this.value;
        sortPlaces();
        renderPlaces();
        setupPagination();
      });

      // Category buttons
      document.querySelectorAll('.tag').forEach(b => {
        b.addEventListener('click', function() {
          document.querySelectorAll('.tag').forEach(x => x.classList.remove('active'));
          this.classList.add('active');
          filterPlaces();
        });
      });

      // Toggle advanced filters
      filterToggle.addEventListener('click', function() {
        advancedFilters.classList.toggle('show');
        this.innerHTML = advancedFilters.classList.contains('show') ? 
          '<i class="fas fa-times"></i> Сховати фільтри' : 
          '<i class="fas fa-sliders-h"></i> Розширені фільтри';
      });

      // Toggle views
      listView.addEventListener('click', function() {
        if (currentView === 'map') toggleView();
      });
      
      mapView.addEventListener('click', function() {
        if (currentView === 'list') toggleView();
      });

      // Mobile nav toggle
      navToggle.addEventListener('click', function() {
        mainNav.classList.toggle('show');
      });

      // Modal close
      modalClose.addEventListener('click', function() {
        placeModal.classList.remove('show');
      });

      // Close modal when clicking outside
      placeModal.addEventListener('click', function(e) {
        if (e.target === placeModal) {
          placeModal.classList.remove('show');
        }
      });
    }

    function toggleView() {
      currentView = currentView === 'list' ? 'map' : 'list';
      
      if (currentView === 'list') {
        listView.classList.add('active');
        mapView.classList.remove('active');
        grid.style.display = 'grid';
        mapContainer.classList.remove('show');
        pagination.style.display = 'flex';
      } else {
        listView.classList.remove('active');
        mapView.classList.add('active');
        grid.style.display = 'none';
        mapContainer.classList.add('show');
        pagination.style.display = 'none';
      }
    }

    function filterPlaces() {
      loading.classList.add('show');
      
      // Simulate loading delay
      setTimeout(() => {
        const qv = q.value.trim().toLowerCase();
        const cityv = city.value;
        const cuisinev = cuisine.value;
        const pricev = price.value;
        const ratingv = ratingFilter.value;
        const activeCat = document.querySelector('.tag.active').dataset.cat || 'all';

        filteredPlaces = places.filter(p => {
          // Category filter
          if (activeCat !== 'all' && p.cat !== activeCat) return false;
          
          // City filter
          if (cityv && p.city !== cityv) return false;
          
          // Cuisine filter
          if (cuisinev && p.cuisine !== cuisinev) return false;
          
          // Price filter
          if (pricev && p.price !== pricev) return false;
          
          // Rating filter
          if (ratingv && p.rating < parseFloat(ratingv)) return false;
          
          // Search query
          if (!qv) return true;
          return (p.name + ' ' + p.desc + ' ' + p.city + ' ' + p.cuisine).toLowerCase().includes(qv);
        });

        sortPlaces();
        currentPage = 1;
        renderPlaces();
        setupPagination();
        loading.classList.remove('show');
      }, 500);
    }

    function sortPlaces() {
      switch(currentSort) {
        case 'rating':
          filteredPlaces.sort((a, b) => b.rating - a.rating);
          break;
        case 'name':
          filteredPlaces.sort((a, b) => a.name.localeCompare(b.name));
          break;
        case 'city':
          filteredPlaces.sort((a, b) => a.city.localeCompare(b.city));
          break;
        default:
          // Default sorting (by id)
          filteredPlaces.sort((a, b) => a.id - b.id);
      }
    }

    function renderPlaces() {
      const startIndex = (currentPage - 1) * itemsPerPage;
      const paginatedItems = filteredPlaces.slice(startIndex, startIndex + itemsPerPage);
      
      grid.innerHTML = '';
      
      if (!paginatedItems.length) {
        resultsInfo.textContent = 'Нічого не знайдено. Спробуйте змінити критерії пошуку.';
        return;
      }
      
      resultsInfo.textContent = `Показано ${startIndex + 1}-${Math.min(startIndex + itemsPerPage, filteredPlaces.length)} з ${filteredPlaces.length} результатів`;
      
      paginatedItems.forEach(p => {
        const el = document.createElement('div');
        el.className = 'card';
        el.innerHTML = `
          <div class="thumb" style="background-image:url('${p.img}')" aria-hidden="true">
            <div class="card-badge">${p.cat === 'restaurant' ? 'Ресторан' : p.cat === 'cafe' ? 'Кафе' : p.cat === 'market' ? 'Магазин' : p.cat === 'butcher' ? 'М\'ясний' : 'Послуги'}</div>
          </div>
          <div class="card-content">
            <div class="card-header">
              <h3 class="title">${escapeHtml(p.name)}</h3>
              ${p.verified ? '<span class="verified-badge"><i class="fas fa-check-circle"></i> Перевірено</span>' : ''}
            </div>
            <p class="descr">${escapeHtml(p.desc)}</p>
            <div class="card-meta">
              <div><i class="fas fa-map-marker-alt"></i> ${p.city}</div>
              <div class="rating"><i class="fas fa-star"></i> ${p.rating}</div>
            </div>
          </div>
        `;
        
        el.addEventListener('click', () => showPlaceDetails(p));
        grid.appendChild(el);
      });
    }

    function showPlaceDetails(place) {
      modalContent.innerHTML = `
        <div class="thumb" style="background-image:url('${place.img}');height:200px;border-radius:8px;margin-bottom:20px">
          <div class="card-badge">${place.cat === 'restaurant' ? 'Ресторан' : place.cat === 'cafe' ? 'Кафе' : place.cat === 'market' ? 'Магазин' : place.cat === 'butcher' ? 'М\'ясний' : 'Послуги'}</div>
        </div>
        <h2 style="margin-top:0">${escapeHtml(place.name)}</h2>
        ${place.verified ? '<span class="verified-badge" style="margin-bottom:15px;display:inline-block"><i class="fas fa-check-circle"></i> Перевірено</span>' : ''}
        
        <div style="display:flex;gap:15px;margin-bottom:15px;flex-wrap:wrap">
          <div><strong><i class="fas fa-map-marker-alt"></i> Місто:</strong> ${place.city}</div>
          <div><strong><i class="fas fa-star"></i> Рейтинг:</strong> ${place.rating}/5</div>
          <div><strong><i class="fas fa-tag"></i> Ціни:</strong> ${place.price === 'low' ? '$' : place.price === 'medium' ? '$$' : '$$$'}</div>
        </div>
        
        <p>${escapeHtml(place.desc)}</p>
        
        <div style="margin:20px 0">
          <h4>Контактна інформація</h4>
          <p><i class="fas fa-map-pin"></i> <strong>Адреса:</strong> ${place.address}</p>
          <p><i class="fas fa-phone"></i> <strong>Телефон:</strong> ${place.phone}</p>
          <p><i class="fas fa-clock"></i> <strong>Години роботи:</strong> ${place.hours}</p>
        </div>
        
        ${place.cuisine ? `<p><strong>Тип кухні:</strong> ${place.cuisine === 'turkish' ? 'Турецька' : place.cuisine === 'arabic' ? 'Арабська' : place.cuisine === 'asian' ? 'Азійська' : place.cuisine === 'european' ? 'Європейська' : 'Узбецька'}</p>` : ''}
        
        <div style="margin-top:25px;display:flex;gap:10px">
          <button class="searchbtn" style="padding:10px 15px"><i class="fas fa-directions"></i> Маршрут</button>
          <button class="tag" style="border:1px solid var(--accent)"><i class="fas fa-heart"></i> Зберегти</button>
        </div>
      `;
      
      placeModal.classList.add('show');
    }

    function setupPagination() {
      const pageCount = Math.ceil(filteredPlaces.length / itemsPerPage);
      
      if (pageCount <= 1) {
        pagination.innerHTML = '';
        return;
      }
      
      let paginationHTML = '';
      
      // Previous button
      paginationHTML += `<button class="page-btn" ${currentPage === 1 ? 'disabled' : ''} data-page="${currentPage - 1}"><i class="fas fa-chevron-left"></i></button>`;
      
      // Page numbers
      for (let i = 1; i <= pageCount; i++) {
        if (i === 1 || i === pageCount || (i >= currentPage - 1 && i <= currentPage + 1)) {
          paginationHTML += `<button class="page-btn ${i === currentPage ? 'active' : ''}" data-page="${i}">${i}</button>`;
        } else if (i === currentPage - 2 || i === currentPage + 2) {
          paginationHTML += `<span style="padding:8px">...</span>`;
        }
      }
      
      // Next button
      paginationHTML += `<button class="page-btn" ${currentPage === pageCount ? 'disabled' : ''} data-page="${currentPage + 1}"><i class="fas fa-chevron-right"></i></button>`;
      
      pagination.innerHTML = paginationHTML;
      
      // Add event listeners to pagination buttons
      pagination.querySelectorAll('.page-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          if (this.disabled) return;
          currentPage = parseInt(this.dataset.page);
          renderPlaces();
          setupPagination();
          window.scrollTo({ top: 0, behavior: 'smooth' });
        });
      });
    }

    function escapeHtml(str) {
      return String(str).replace(/[&<>"']/g, s => ({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' }[s]));
    }
  </script>
</body>
</html>